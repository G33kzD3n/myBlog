<div class="row">
  <div class="col-md-9">
    <div class="card" style="padding-right:10px;margin-left:10px;width:100%; overflow-y:scroll; height:600px; border-right:solid rgba(167, 166, 166, 0.788) 5px ; ">
      <div class="row">
        <div class="col-md-10">
          <h3 style="text-align:center">Edit profile</h3>
        </div>
        <div class="col-md-2 pull-right">
          <button class="btn btn-primary" style="margin:auto;text-align:right;width:90%;height:100%" (click)="redirectToViewProfile()">Back</button>
        </div>
      </div>
      <hr>
      <div style="padding:10px; margin:0px 5px 0 2px;">
        <form [formGroup]="editProfileForm" (ngSubmit)="editProfile(editProfileForm)">
          <div class="form-row">
            <div class="form-group col-md-8" style=" width:80%">
              <label for="name">Name</label>
              <input formControlName="name" type="text" class="form-control" id="name" value="{{user?.name}}">
              <label for="email">Email</label>
              <input formControlName="email" type="email" class="form-control" id="email" value="{{user?.email}}">
              <label for="profession">Works as</label>
              <input formControlName="profession" type="text" class="form-control" id="profession" value="{{user?.profession}}">
              <label for="profession">Works as</label>
              <input formControlName="profession" type="text" class="form-control" id="profession" value="{{user?.profession}}">
            </div>
            <div class="form-group col-md-4">
              <img data-toggle="tooltip" data-placement="top" title="Upload Profile pic" (click)="avatar.click()" src="{{basePath}}{{user?.avatar}}"
                style=" display:inline;cursor: pointer;width:250px; border-radius: 60%; height: 250px">
              <input style="display:none" #avatar name="avatar" type="file" (change)="uploadAvtar($event)">
            </div>
          </div>
          <div class="row">

            <div class="form-group col-md-12">
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="radiogroup" id="privacyPublic" value="false"
                  [checked]="user?.privacy==false" (change)="privacyValue('public')">
                <label class="form-check-label" for="privacyPublic">Public</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="radiogroup" id="privacyPublic" value="true"
                  [checked]="user?.privacy==true" (change)="privacyValue('private')">
                <label class="form-check-label" for="privacyPublic">Private</label>
              </div>
            </div>
          </div>
          <button type="submit" [disabled]="!editProfileForm.valid" class="btn btn-primary">Save</button>
        </form>
        <hr *ngIf="privacy">
        <div class="row" *ngIf="privacy">
          <div class=" col-md-12">
            <h4 class="card-title ">Privacy Setting</h4>
            <p class="card-body "> Allow Followers to view your profile.</p>
            <div *ngIf="noFollowers && erroMessage != null" class="alert alert-warning alert-dismissible show" role="alert">
              <strong>Holy guacamole!</strong>{{erroMessage}}.
              <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true"></span>
              </button>
            </div>
            <div *ngIf="noFollowing && erroMessage != null" class="alert alert-warning alert-dismissible show" role="alert">
              <strong>Holy guacamole!</strong>{{erroMessage}}.
              <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="input-group col-md-12 dropdown-input">
              <input [(ngModel)]="searchText" type="text" class="form-control dropdown-input" aria-label="Text input with dropdown button">
              <div class="input-group-append" style="padding-left:0px;">
                <button class="btn btn-outline-secondary dropdown-toggle active" type="button" data-toggle="dropdown"
                  aria-haspopup="true" aria-expanded="false">{{dropdown_btn_name}}</button>
                <div class="dropdown-menu">
                  <a class="dropdown-item" (click)="showAll()">All</a>
                  <a class="dropdown-item" (click)="noFollowing ==false ? showFollowing() : showNoFollowingMessage()">Following</a>
                  <a class="dropdown-item" (click)="noFollowers == false ?showFollowers() : showNoFollowerMessage()">Followers</a>
                  <div role="separator" class="dropdown-divider"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row" style="margin-top: 10px" *ngIf="privacy">
          <div class="col-md-10">
          </div>
          <div class="col-md-2 pl-38">
            <div class=" input-group form-check">
              <input class="form-check-input pull-right" type="checkbox" (click)="checkAll($event)" [checked]="allowAllClicked">
              <label class="form-check-label ">
                Allow ALL
              </label>
            </div>
          </div>
        </div>
        <div class="row" *ngIf="privacy">
          <div class="col-md-12" *ngIf="privacy && hideVisiblityForm == true">
            <form [formGroup]="visiblityForm" (ngSubmit)="updatePrivacy()">
              <div formArrayName="visiblity">
                <ul class="list-group " *ngFor="let vis of visiblityForm.controls.visiblity.controls | filterPipe : searchText ; let i = index">
                  <li class="list-group-item" [formGroupName]="i">
                    <div class="row">
                      <span class="text-muted row-span-followsyou pull-left">{{vis.get('is').value =='both'?'You both
                        follow each
                        other':'' }}</span>
                      <span class="text-muted row-span-followsyou pull-left">{{vis.get('is').value
                        =='follower'?'Follows you':''}}</span>
                    </div>
                    <div class="row">
                      <div class="col-md-1" style="padding-right: 0px">
                        <img readonly *ngIf="vis.get('avatar').value !=null" src="http://localhost:9100/avatars/{{vis.get('avatar').value}}"
                          width="40px;" class="img-avatar-followers pull-left">
                      </div>
                      <div class="col-md-7" style=" padding-left: 0px;margin-left:0px">
                        <a class="row a-names div-col-a-authorname" routerLink="/users/{{vis.get('followingId').value}}">
                          <span class="names">{{vis.get('name').value}}
                            <i class="fa fa-lock privacy-lock" *ngIf="vis.get('privacy').value"></i>
                          </span>

                        </a>
                      </div>
                      <div class="col-md-2">
                      </div>
                      <div class=" col-md-2 form-check pull-right" style="padding-left:40px;">
                        <input class="form-check-input" type="checkbox" (change)="toggleCanSee(i)" [checked]="vis.get('cansee').value">
                        <label class="form-check-label" for="following?.id">
                          Allow
                        </label>
                      </div>
                    </div>
                  </li>
                </ul>
              </div>
              <button class="btn btn-primary" style="margin-top:10px">Update Privacy</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-md-3 col-sm-3 col-xs-3" style="height :600px; padding-left:0px">
    <app-activity-tiker></app-activity-tiker>
  </div>
</div>